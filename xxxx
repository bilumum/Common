<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="bootstra.custom.css" rel="stylesheet" />
    <link href="../../Content/css/bootstrap.css" rel="stylesheet" />
    <link href="../../Content/css/font-awesome.min.css" rel="stylesheet" />
    <link href="container.css" rel="stylesheet" />
    <link href="site.main.css" rel="stylesheet" />    

    <script src="../../Content/js/jquery-2.1.1.min.js"></script>
    <script src="../../Content/js/bootstrap.js"></script>

    <style>
        .smart-rating-wrapper {
    position: absolute;
    width: 100%;
    top: 50px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.panel-group .panel .panel-heading a {
    padding: 20px 20px;
}


.panel-group .panel .panel-heading .summary .fa {
    margin: 0 0px;
    color: #333;
}

.panel-group .panel .panel-heading .title {
    white-space: nowrap;
    flex-basis: auto;
}

.panel-group {
}

.smart-rate-table {
    /*max-width: 750px;*/
    text-align: center;
}

.smart-rate-table > tbody > tr[data-is-parent="true"] > td {
        text-align: center;        
       color: white;
       background-color: rgba(64, 153, 152, 1);
       border-left: none;
       border-right: none;
       /*border-color:rgba(64, 153, 152, 1);*/
    }

    .smart-rate-table > tbody > tr[data-is-parent="true"] > td::after {
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 32px 0 0 32px;
        border-color: transparent transparent transparent #da424c;
        line-height: 0px;
        _border-color: #000000 #000000 #000000 #da424c;        
    }

.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="1"] {
      opacity: 0.3;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="2"] {
      opacity: 0.3;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="3"] {
      opacity: 0.3;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="4"] {
      opacity: 0.6;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="5"] {
      opacity: 0.6;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="6"] {
      opacity: 0.6;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="7"] {
      opacity: 0.9;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="8"] {
      opacity: 0.9;
    }
.smart-rate-table > tbody > tr[data-is-parent="true"] > td[data-value="9"] {
      opacity: 0.9;
    }

    .smart-rate-table > thead > tr > th {
        text-align: center;
        font-size: 12px;
        /*width: 25%;*/
    }

    .smart-rate-table > tbody > tr > th {
        font-size: 12px;
        font-weight: normal;
        color: #409998;
    }

    .smart-rate-table > tbody > tr > td {
        color: gray;
        cursor: pointer;
         transition: background-color 0.5s ease;
         color:white;
    }

    .smart-rate-table > tbody > tr > .nested-rate-row {
        padding: 0px;
    }

    .smart-rate-table > tbody > tr > td.selected-main-calculated {
        background-color: rgba(249, 208, 69, 0.2);
        color:gray;
    }

     .smart-rate-table > tbody > tr > td.selected-main {
        background-color: rgba(64, 153, 152, 1);
        color: white;        
    }

    .smart-rate-table > tbody > tr > td.selected-main[data-value="1"], .smart-rate-table > tbody > tr > td.selected-main[data-value="2"], .smart-rate-table > tbody > tr > td.selected-main[data-value="3"] {
       opacity: 0.3;
    }

    .smart-rate-table > tbody > tr > td.selected-main[data-value="4"], .smart-rate-table > tbody > tr > td.selected-main[data-value="5"], .smart-rate-table > tbody > tr > td.selected-main[data-value="6"] {
       opacity: 0.6;
    }

    .smart-rate-table > tbody > tr > td.selected-main[data-value="7"], .smart-rate-table > tbody > tr > td.selected-main[data-value="8"], .smart-rate-table > tbody > tr > td.selected-main[data-value="9"] {
       opacity: 0.9;
    }
    
    .smart-rate-table > tbody > tr > td.selected-sub {
        background-color: rgba(249, 208, 69, 0.4);
    }

    .smart-rate-table .subitem-title {
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        line-height: 16px; /* fallback */
        max-height: 32px; /* fallback */
        -webkit-line-clamp: 2; /* number of lines to show */
        -webkit-box-orient: vertical;
    }

    .smart-rate-table .item-title {
        font-size: 14px;
        font-weight: bold;
    }

    .smart-rate-table .nested-opener {
        cursor: pointer;
    }

.smart-rate-table-container {
    padding: 20px;
    width: 770px;
}


.nested-rate-row .table {
    border: none;
    margin-bottom: 0px;
}


.nested-rate-row table tr th {
    border-left: none !important;
    width: 28%;
}

.nested-rate-row table tr td {
    width: 8%;
}

.nested-rate-row table tr:first-child th {
    border-top: none !important;
}

.nested-rate-row table tr:first-child td {
    border-top: none !important;
}

.nested-rate-tr {
    /*display:none;*/
}


.table-no-border > tbody > tr > th,
.table-no-border > tbody > tr > td,
.table-no-border > tbody{
    /*border-top: none !important;*/
    border-bottom: none !important;
    /*border-left: none !important;*/
    border-right: none !important;
    /*border-bottom: none !important;*/
}

.table-no-border > tbody > tr:last-child > th,
.table-no-border > tbody > tr:last-child > td {
    /*border-top: none !important;*/
    /*border-bottom: none !important;*/
    /*border-left: none !important;*/
    border-right: none !important;
    border-bottom:1px solid rgba(64, 153, 152, 0.7) !important;
    /*border-bottom: none !important;*/
}

    </style>

</head>
<body>

    <div class="smart-rating-wrapper">
        <div class="inner-container inner-container-default inner-container-box-shadow noPadding">
            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingCustomerSelection">
                        <a class="collapse-open">
                            <span class="title"><b>Ümit</b>'in yetkinliğini aşağıdaki 7 kritere göre değerlendirin</span>
                        </a>
                    </div>
                    <div class="smart-rate-table-container">
                        <table class="table table-bordered smart-rate-table">
                            <thead>
                                <tr>
                                    <th style="width: 28%;"></th>
                                    <th colspan="3" style="width: 24%;">Gelişime İhtiyacı Var</th>
                                    <th colspan="3" style="width: 24%;">Tatmin Edici Seviyede</th>
                                    <th colspan="3" style="width: 24%;">Üstün/Başkalarına Örnek </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-is-parent="true" data-group-id="1">
                                    <th scope="row"><span class="item-title">KİŞİSEL YETKİNLİKLER</span></th>
                                    <td data-value="1">1</td>
                                    <td data-value="2">2</td>
                                    <td data-value="3">3</td>
                                    <td data-value="4">4</td>
                                    <td data-value="5">5</td>
                                    <td data-value="6">6</td>
                                    <td data-value="7">7</td>
                                    <td data-value="8">8</td>
                                    <td data-value="9">9</td>
                                </tr>
                                <tr class="rate-main-tr" data-id="1" data-group-id="1">
                                    <th scope="row" class="accordion-toggle nested-opener">
                                        <span class="fa fa-plus-square fa-minus-square nested-opener-icon" ></span>&nbsp&nbsp
                                        <span >İletişim</span>
                                    </th>
                                    <td data-value="1">1</td>
                                    <td data-value="2">2</td>
                                    <td data-value="3">3</td>
                                    <td data-value="4">4</td>
                                    <td data-value="5">5</td>
                                    <td data-value="6">6</td>
                                    <td data-value="7">7</td>
                                    <td data-value="8">8</td>
                                    <td data-value="9">9</td>
                                </tr>
                                <tr data-parent-id="1" class="nested-rate-tr">
                                    <td colspan="10" class="nested-rate-row">
                                        <div class="accordian-body collapse in" id="demo1">
                                            <table data-parent-id="1" class="table table-bordered table-no-border smart-rate-table smart-rate-table-nested">                                             
                                                <tbody>
                                                    <tr data-parent-id="1">
                                                        <th scope="row">
                                                            <span class="subitem-title">
                                                                Bir konu ile ilgili düşünce ve bilgilerini net, düzgün, anlaşılır ve yalın bir şekilde ifade eder.
                                                            </span>
                                                        </th>                                                        
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="1">
                                                        <th scope="row">
                                                            <span class="subitem-title" data-toggle="tooltip" data-placement="left" title="Tooltip on left">
                                                                Karşısındaki kişiyi sözünü kesmeden, saygıyla dinler.
                                                            </span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="1">
                                                        <th scope="row">
                                                            <span class="subitem-title">
                                                                Fikir ve görüşlerini sunarken kendine güvenini tavır ve davranışlarıyla karşı tarafa yansıtır.
                                                            </span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                     <tr data-parent-id="1">
                                                        <th scope="row">
                                                            <span class="subitem-title">
                                                                İletişimde aktarılan mesajların doğru anlaşıldığından emin olmaya çalışır.
                                                            </span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                     <tr data-parent-id="1">
                                                        <th scope="row">
                                                            <span class="subitem-title">
                                                                Görüşlerini aktarırken göz teması kurar ve uygun beden dili kullanır.
                                                            </span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="rate-main-tr" data-id="2" data-group-id="1">
                                     <th scope="row" class="accordion-toggle nested-opener">
                                        <span class="fa fa-plus-square nested-opener-icon" ></span>&nbsp&nbsp
                                        <span >İkna Etme</span>
                                    </th>
                                   <td data-value="1">1</td>
                                    <td data-value="2">2</td>
                                    <td data-value="3">3</td>
                                    <td data-value="4">4</td>
                                    <td data-value="5">5</td>
                                    <td data-value="6">6</td>
                                    <td data-value="7">7</td>
                                    <td data-value="8">8</td>
                                    <td data-value="9">9</td>

                                </tr>
                                <tr data-parent-id="2" class="nested-rate-tr">
                                    <td colspan="10" class="nested-rate-row">
                                        <div class="accordian-body collapse" id="Div1">
                                            <table data-parent-id="2" class="table table-bordered table-no-border smart-rate-table smart-rate-table-nested">                                             
                                                <tbody>
                                                   <tr data-parent-id="2">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 1</span>
                                                        </th>                                                        
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="2">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 2</span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="2">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 3</span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="rate-main-tr" data-id="3" data-group-id="1">
                                     <th scope="row" class="accordion-toggle nested-opener">
                                        <span class="fa fa-plus-square nested-opener-icon" ></span>&nbsp&nbsp
                                        <span>Çatışma Yönetimi</span>
                                    </th>
                                   <td data-value="1">1</td>
                                    <td data-value="2">2</td>
                                    <td data-value="3">3</td>
                                    <td data-value="4">4</td>
                                    <td data-value="5">5</td>
                                    <td data-value="6">6</td>
                                    <td data-value="7">7</td>
                                    <td data-value="8">8</td>
                                    <td data-value="9">9</td>
                                </tr>
                                <tr data-parent-id="3" class="nested-rate-tr">
                                    <td colspan="10" class="nested-rate-row">
                                        <div class="accordian-body collapse" id="Div2">
                                            <table data-parent-id="3" class="table table-bordered table-no-border smart-rate-table smart-rate-table-nested">                                             
                                                <tbody>
                                                    <tr data-parent-id="3">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 1</span>
                                                        </th>                                                        
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="3">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 2</span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                    <tr data-parent-id="3">
                                                        <th scope="row">
                                                            <span class="subitem-title">Soru 3</span>
                                                        </th>
                                                        <td data-value="1"></td>
                                                        <td data-value="2"></td>
                                                        <td data-value="3"></td>
                                                        <td data-value="4"></td>
                                                        <td data-value="5"></td>
                                                        <td data-value="6"></td>
                                                        <td data-value="7"></td>
                                                        <td data-value="8"></td>
                                                        <td data-value="9"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <th scope="row"><span class="item-title">İŞ YETKİNLİKLERİ</span></th>
                                    <td colspan="9" data-is-parent="true"></td>
                                </tr>

                                <tr>
                                    <th scope="row"><span class="fa fa-plus-square subitem-opener"></span>&nbsp&nbsp <span>Baskılarla Başa Çıkma</span></th>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                </tr>
                                <tr>
                                    <th scope="row"><span class="fa fa-plus-square subitem-opener"></span>&nbsp&nbsp <span>Analiz Etme</span></th>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                </tr>
                                <tr>
                                    <th scope="row"><span class="fa fa-plus-square subitem-opener"></span>&nbsp&nbsp <span>Kalite ve Hareket Odaklılık</span></th>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                </tr>
                                <tr>
                                    <th scope="row"><span class="fa fa-plus-square subitem-opener"></span>&nbsp&nbsp <span>Müşteri Odaklılık</span></th>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        $(function () {
            
            $('.smart-rate-table .nested-opener').on('click', function () {
                var currentTr = $(this).parent('tr').next();
                var collapse = currentTr.find('.collapse');              
                collapse.collapse('toggle');
                $(this).find('.nested-opener-icon').toggleClass('fa-minus-square');
            });

            $('.smart-rate-table tbody tr:not(.nested-rate-tr) td').on('click', function (i, row) {
               
                //prevent main header cell click
                if ($(this).parent('tr').attr('data-is-parent')) {
                    return;
                }

                //clear current selection
                $(this).parent('tr').find('td').each(function (j, cell) {
                    $(cell).removeClass('selected-sub');
                    $(cell).removeClass('selected-main');
                    $(this).removeAttr('data-selected-value');
                });


                $(this).parent('tr').attr('data-selected-value', $(this).attr('data-value'));

                var selectedCss = '';
                var parentId = $(this).parent('tr').attr('data-parent-id');                
                if (parentId) { //it is subitem
                    selectedCss = 'selected-sub';
                    calculateAndSelectItem(parentId);                   
                }
                else {
                    var groupId = $(this).parent('tr').attr('data-group-id');
                    selectedCss = 'selected-main';
                    calculateMainRateAndShow(groupId);
                    
                }
                $(this).addClass(selectedCss);
            });


            function calculateAndSelectItem(itemId) {
                var totalRate = 0;
                var ratedItemCount = 0;
                $('.smart-rate-table tbody tr[data-parent-id=' + itemId + ']').each(function (i, row) {
                    var currentValue = parseInt($(this).attr('data-selected-value'));
                    if (!isNaN(currentValue)) {
                        totalRate += currentValue;
                        ratedItemCount++;
                    }
                });

                var avarageRate = Math.round(totalRate / ratedItemCount);

                $('.smart-rate-table tbody tr[data-id=' + itemId + '] td').each(function (i, cell) {
                    $(cell).removeClass('selected-main-calculated');
                });

                var calculatedCell = $('.smart-rate-table tbody tr[data-id=' + itemId + '] td[data-value=' + avarageRate + ']');
                if (!calculatedCell.hasClass('selected-main')) {
                    calculatedCell.addClass('selected-main-calculated');
                    setTimeout(function () {                        
                        calculatedCell.removeClass("selected-main-calculated");
                    }, 1000);
                }

            }

            function calculateMainRateAndShow(groupId) {
                var totalRate = 0;
                var ratedItemCount = 0;
                $('.smart-rate-table tbody tr[data-group-id=' + groupId + ']').each(function (i, row) {
                    var currentValue = parseInt($(this).attr('data-selected-value'));
                    if (!isNaN(currentValue)) {
                        totalRate += currentValue;
                        ratedItemCount++;
                    }
                });

                var avarageRate = Math.round(totalRate / ratedItemCount);
                var calculatedCell = $('.smart-rate-table tbody tr[data-is-parent="true"][data-group-id=' + groupId + '] td[data-value=' + avarageRate + ']');
                calculatedCell.addClass('selected-main-calculated');
                setTimeout(function () {
                    calculatedCell.removeClass("selected-main-calculated");
                }, 1000);
            }
           
        });
    </script>

</body>
</html>
